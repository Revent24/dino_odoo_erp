# API НБУ: Официальные курсы валют

Краткое справочное руководство по API Национального Банка Украины для получения официальных курсов гривны к иностранным валютам и банковским металлам.

## 1. Получение курсов валют за период

Этот сервис предоставляет информацию об официальном курсе гривны к выбранной иностранной валюте/банковскому металлу за указанный период времени.

### Параметры запроса (Query Parameters)

- **`start`**
  - **Описание:** Дата начала периода в формате `YYYYMMDD` без разделителей.
  - **Пример:** `20230101`
  - **Обязательный:** Да

- **`end`**
  - **Описание:** Дата завершения периода в формате `YYYYMMDD` без разделителей.
  - **Пример:** `20230131`
  - **Обязательный:** Да

- **`valcode`**
  - **Описание:** Символьный код валюты (например, `USD`, `EUR`). Если не указан, возвращаются данные по всем валютам.
  - **Пример:** `USD`
  - **Обязательный:** Нет

- **`sort`**
  - **Описание:** Поле для сортировки. Возможные значения: `exchangedate`, `r030`, `cc`, `rate`.
  - **Пример:** `exchangedate`
  - **Обязательный:** Нет

- **`order`**
  - **Описание:** Направление сортировки: `desc` (по убыванию) или `asc` (по возрастанию).
  - **Пример:** `desc`
  - **Обязательный:** Нет

- **`json`**
  - **Описание:** Указывает на необходимость вернуть ответ в формате JSON. Если параметр отсутствует, ответ будет в формате XML.
  - **Пример:** `json` (без значения)
  - **Обязательный:** Нет

### URL точки входа (Endpoint)


-   **Метод:** `GET`
-   **Базовый URL:** `https://bank.gov.ua/NBU_Exchange/exchange_site`

### Примеры

#### Запрос в формате JSON

```
https://bank.gov.ua/NBU_Exchange/exchange_site?start=20220501&end=20220505&valcode=usd&sort=exchangedate&order=desc&json
```

**Пример ответа (JSON):**

```json
[
    {
        "exchangedate": "05.05.2022",
        "r030": 840,
        "cc": "USD",
        "txt": "Долар США",
        "enname": "US Dollar",
        "rate": 29.2549,
        "units": 1,
        "rate_per_unit": 29.2549,
        "group": "1",
        "calcdate": "04.05.2022"
    },
    {
        "exchangedate": "04.05.2022",
        "r030": 840,
        "cc": "USD",
        "txt": "Долар США",
        "enname": "US Dollar",
        "rate": 29.2549,
        "units": 1,
        "rate_per_unit": 29.2549,
        "group": "1",
        "calcdate": "03.05.2022"
    }
]
```

#### Запрос в формате XML

```
https://bank.gov.ua/NBU_Exchange/exchange_site?start=20220501&end=20220505&valcode=usd&sort=exchangedate&order=desc
```

**Пример ответа (XML):**

```xml
<exchange>
    <currency>
        <exchangedate>05.05.2022</exchangedate>
        <r030>840</r030>
        <cc>USD</cc>
        <txt>Долар США</txt>
        <enname>US Dollar</enname>
        <rate>29.2549</rate>
        <units>1</units>
        <rate_per_unit>29.2549</rate_per_unit>
        <group>1</group>
        <calcdate>04.05.2022</calcdate>
    </currency>
    <currency>
        <exchangedate>04.05.2022</exchangedate>
        <r030>840</r030>
        <cc>USD</cc>
        <txt>Долар США</txt>
        <enname>US Dollar</enname>
        <rate>29.2549</rate>
        <units>1</units>
        <rate_per_unit>29.2549</rate_per_unit>
        <group>1</group>
        <calcdate>03.05.2022</calcdate>
    </currency>
</exchange>
```

### Описание полей ответа

- **`exchangedate`**: (string) Дата курса в формате `DD.MM.YYYY`. Пример: `"05.05.2022"`.
- **`r030`**: (integer) Цифровой код валюты (ISO 3166-1). Пример: `840`.
- **`cc`**: (string) Буквенный код валюты (ISO 4217). Пример: `"USD"`.
- **`txt`**: (string) Название валюты на украинском. Пример: `"Долар США"`.
- **`enname`**: (string) Название валюты на английском. Пример: `"US Dollar"`.
- **`rate`**: (float) Официальный курс. Пример: `29.2549`.
- **`units`**: (integer) Количество единиц иностранной валюты. Пример: `1`.
- **`rate_per_unit`**: (float) Курс за одну единицу. Пример: `29.2549`.
- **`group`**: (string) Группа валют (1, 2, 3). Пример: `"1"`.
- **`calcdate`**: (string) Дата расчета курса в формате `DD.MM.YYYY`. Пример: `"04.05.2022"`.

## 2. Информация о руководителях банков

-   **Описание:** Получение актуальной информации о руководителях банков на текущую дату.
-   **Точка входа (Endpoint):**
    -   **Метод:** `GET`
    -   **URL:** `https://bank.gov.ua/files/from_api/bank_managers.json`
-   **Формат ответа:** JSON

### Пример ответа (JSON)
*Один объект из массива*
```json
{
    "PERSON_ID": 25791,
    "SHORTNAME": "АТ \"Ощадбанк\"",
    "FULLNAME": "акціонерне товариство \"Державний ощадний банк України\"",
    "MFO": 300465,
    "COD_STATE": 1,
    "NAME_STATE": "Нормальний",
    "DATE_BANK": "2014-03-18T00:00:00",
    "DATE_CHANGE": "2014-03-25T00:00:00",
    "COD_DOLGN": 10,
    "NAME_DOLGN": "Голова Правління",
    "DOLGN_GROUP_ID": 3,
    "DOLGN_GROUP_NAME": "Голова Правліня",
    "MAIN_DOLGN_GROUP_ID": 22,
    "MAIN_DOLGN_GROUP_NAME": "Правліня банку",
    "LAST_NAME": "Пишний",
    "FIRST_NAME": "Андрій",
    "FATHER_NAME": "Григорович",
    "DATE_UVOL": "2020-11-02T00:00:00",
    "DATE_ENTRY_OFFICE": "2014-03-25T00:00:00",
    "IKOD": "00032129",
    "BANK_NAMES_HISTORY": "ОЩАДБАНК УКРАЇНИ (з 31.12.1991)\\nОЩАДНИЙ БАНК УКРАЇНИ \\\" ОЩАДБАНК\\\" (з 26.05.1999)\\n...",
    "BANK_NAMES_HISTORY_JSON": "{\\n\\t\\\"BANK_NAMES\\\":[...]}",
    "ID_NBU": "300465"
}
```

### Описание полей ответа

- **`PERSON_ID`**: ID записи о руководителе.
- **`SHORTNAME`**: Сокращенное наименование банка.
- **`FULLNAME`**: Полное наименование банка.
- **`MFO`**: Код банка (МФО).
- **`COD_STATE`**: Код состояния банка.
- **`NAME_STATE`**: Текущее состояние банка.
- **`DATE_BANK`**: Дата назначения (избрания).
- **`DATE_CHANGE`**: Дата согласования.
- **`COD_DOLGN`**: ID должности.
- **`NAME_DOLGN`**: Название должности.
- **`DOLGN_GROUP_ID`**: ID группы должностей.
- **`DOLGN_GROUP_NAME`**: Название группы должностей.
- **`MAIN_DOLGN_GROUP_ID`**: ID типа группы должностей.
- **`MAIN_DOLGN_GROUP_NAME`**: Название типа группы должностей.
- **`LAST_NAME`**: Фамилия руководителя.
- **`FIRST_NAME`**: Имя.
- **`FATHER_NAME`**: Отчество.
- **`DATE_UVOL`**: Дата прекращения полномочий (увольнения, перевода).
- **`DATE_ENTRY_OFFICE`**: Дата вступления в должность.
- **`IKOD`**: Код ЕГРПОУ банка.
- **`BANK_NAMES_HISTORY`**: История названий банка (текстом).
- **`BANK_NAMES_HISTORY_JSON`**: История названий банка (в формате JSON).
- **`ID_NBU`**: Единый идентификатор НБУ.

---

## 3. Справочник банков и их подразделений

Этот набор API предоставляет доступ к справочнику банков Украины, их филиалов и отделений.

### 3.1. Все банки и их подразделения

-   **Описание:** Возвращает актуальные данные по всем банкам и их зарегистрированным подразделениям.
-   **Точка входа (Endpoint):**
    -   **Метод:** `GET`
    -   **URL (JSON):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch?json`
    -   **URL (XML):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch`

### 3.2. Расширенная информация по банкам (с лицензиями)

-   **Описание:** Возвращает актуальные данные только по головным банкам, имеющим банковскую лицензию, с расширенной информацией о ней.
-   **Точка входа (Endpoint):**
    -   **Метод:** `GET`
    -   **URL (JSON):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch_glbank?json`
    -   **URL (XML):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch_glbank`
-   **Фильтрация:** Можно получить данные по конкретному банку, добавив параметр `glmfo`.
    -   **Пример:** `.../get_data_branch_glbank?glmfo=300335&json`

### 3.3. Все подразделения конкретного банка

-   **Описание:** Возвращает информацию по всем подразделениям (включая головной офис) для конкретного банка.
-   **Точка входа (Endpoint):**
    -   **Метод:** `GET`
    -   **Параметры:**
        -   `glmfo` (обязательный): Код (МФО) головного банка.
    -   **URL (JSON):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch?glmfo=300335&json`
    -   **URL (XML):** `https://bank.gov.ua/NBU_BankInfo/get_data_branch?glmfo=300335`

### 3.4. Фильтрация по типу подразделения

Можно фильтровать список как для всех банков, так и для одного конкретного.

-   **Параметры:**
    -   `typ` (обязательный): Код типа подразделения.
    -   `glmfo` (необязательный): Код (МФО) головного банка.

-   **Коды типов подразделений (`typ`):**
    -   `0`: Банк (головной офис)
    -   `1`: Филиал на территории Украины
    -   `2`: Отделение
    -   `3`: Представительство на территории Украины
    -   `5`: Филиал за пределами Украины
    -   `6`: Представительство за пределами Украины

-   **Примеры:**
    -   **Получить все филиалы (`typ=1`) банка Ощадбанк (`glmfo=300465`):**
        -   `.../get_data_branch?glmfo=300465&typ=1&json`
    -   **Получить только головные офисы (`typ=0`) всех банков:**
        -   `.../get_data_branch?typ=0&json`

### Пример объекта из ответа (JSON)

*Структура полей одинакова для большинства запросов к этому справочнику.*
```json
{
    "GLMFO": 300012,
    "N_GOL": "ПАТ \"Промінвестбанк\"",
    "NAME_E": "Public stock company \"Joint-Stock Commercial Industrial & Investment Bank\"...",
    "KOD_EDRPOU": "00039002",
    "SHORTNAME": "ПАТ \"Промінвестбанк\"",
    "FULLNAME": "Публічне акціонерне товариство \"Акціонерний комерційний промислово-інвестиційний банк\"",
    "NKB": "003",
    "TYP": "0",
    "KU": "26",
    "N_OBL": "м.Київ",
    "ADRESS": "вул. Малопідвальна, 8",
    "KSTAN": "1",
    "N_STAN": "Нормальний",
    "D_OPEN": "26.08.1992",
    "D_CLOSE": null,
    "MFO": 300012,
    "IDNBU": "300012",
    "ID_NBU_PARENT": null
}
```

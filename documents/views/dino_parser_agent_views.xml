<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- ==============================================
             TREE VIEW: –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
             ============================================== -->
        <record id="view_dino_parser_agent_list" model="ir.ui.view">
            <field name="name">dino.parser.agent.list</field>
            <field name="model">dino.parser.agent</field>
            <field name="arch" type="xml">
                <list string="Parser Agents" 
                      default_order="sequence, name"
                      decoration-muted="not active">
                    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="agent_type"/>
                    <field name="active" widget="boolean_toggle"/>
                    <field name="usage_count"/>
                    <field name="last_used_date" optional="hide"/>
                </list>
            </field>
        </record>

        <!-- ==============================================
             FORM VIEW: –§–æ—Ä–º–∞ –∞–≥–µ–Ω—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
             ============================================== -->
        <record id="view_dino_parser_agent_form" model="ir.ui.view">
            <field name="name">dino.parser.agent.form</field>
            <field name="model">dino.parser.agent</field>
            <field name="arch" type="xml">
                <form string="Parser Agent">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <field name="active" widget="boolean_button" 
                                   options="{'terminology': 'active'}"/>
                        </div>
                        
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="agent_type"/>
                                <field name="sequence"/>
                                <field name="fallback_agent_id" domain="[('id', '!=', id)]"/>
                            </group>
                            <group>
                                <field name="usage_count" readonly="1"/>
                                <field name="last_used_date" readonly="1"/>
                                <field name="total_tokens_used" readonly="1"/>
                                <field name="total_cost" readonly="1" widget="monetary" options="{'currency_field': 'false', 'field_digits': '[16,4]'}"/>
                            </group>
                        </group>
                        
                        <notebook>
                            <page string="Description" name="description">
                                <field name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∏ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π..."/>
                            </page>
                            
                            <page string="API Settings" name="api_settings" 
                                  invisible="agent_type not in ['ai_openai_compatible', 'ai_anthropic', 'ai_google']">
                                <group>
                                    <group string="API Configuration">
                                        <field name="api_key" password="True"/>
                                        <field name="api_endpoint" placeholder="https://api.openai.com/v1/chat/completions"/>
                                        <field name="model_name" placeholder="gpt-4o-mini"/>
                                    </group>
                                    <group string="Generation Parameters">
                                        <field name="temperature"/>
                                        <field name="max_tokens"/>
                                    </group>
                                </group>
                                
                                <group string="Rate Limits (Read-only)">
                                    <group>
                                        <field name="rate_limit_rpm" readonly="1"/>
                                        <field name="rate_limit_tpm" readonly="1"/>
                                    </group>
                                    <group>
                                        <field name="rate_limit_rpd" readonly="1"/>
                                    </group>
                                </group>
                                
                                <group>
                                    <div class="alert alert-info" role="alert">
                                        <strong>üìä Rate Limits:</strong>
                                        <p style="margin: 5px 0 0 0;">
                                            –õ–∏–º–∏—Ç—ã API –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ (Tier). –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –ø–æ–ª—è –≤—Ä—É—á–Ω—É—é 
                                            –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ó–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
                                        </p>
                                    </div>
                                    <div class="alert alert-warning" role="alert">
                                        <strong>‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong>
                                        <p style="margin: 5px 0 0 0;">
                                            API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∞–≥–µ–Ω—Ç–æ–≤ 
                                            –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á–∏ 
                                            —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –∏ –∫–≤–æ—Ç–∞–º–∏.
                                        </p>
                                    </div>
                                </group>
                            </page>
                            
                            <page string="JSON Schema" name="json_schema">
                                <group>
                                    <div class="alert alert-success" role="alert">
                                        <strong>‚úÖ JSON Schema:</strong>
                                        <p style="margin: 5px 0 0 0;">
                                            JSON —Å—Ö–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ 
                                            <code>documents/services/json_schema_template.json</code>.
                                            –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª.
                                        </p>
                                    </div>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- ==============================================
             ACTION: –î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∞–≥–µ–Ω—Ç–æ–≤
             ============================================== -->
        <record id="action_dino_parser_agent" model="ir.actions.act_window">
            <field name="name">Parser Agents</field>
            <field name="res_model">dino.parser.agent</field>
            <field name="view_mode">list,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
                </p>
                <p>
                    –ê–≥–µ–Ω—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö 
                    –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–Ω–∞–∫–ª–∞–¥–Ω—ã—Ö, —Å—á–µ—Ç–æ–≤, —Å—á–µ—Ç–æ–≤-—Ñ–∞–∫—Ç—É—Ä).
                </p>
            </field>
        </record>

    </data>
</odoo>
